# Вопросы для собеседования

## Общее (10 мин)

* Какую роль ты выполнял в последнем проекте? Что делала остальная команда? Что нравится или не нравится на этом месте?
* Расскажите о сложностях в работе над проектом. Как их решали?
* Что тебя мотивирует в работе? А что демотивирует?

## Архитектурные вопросы (15 мин)

### 0. (5 мин)

Для разминки: с какими терминами ты знаком, и пара слов о них.

* KISS, DRY, YAGNI, SOLID
* TDD, BDD
* DDD
* CRUD, ACID
* ORM, ODM
* MVC, MVVM

### 1. (5 мин)

Есть микросервис "курс валют". При получении валютных пар (рубль-доллар) сервис долго отвечает.

Как можно исправить проблему его медленной работы?

### 2. (5 мин)

Что такое REST и SOAP? Чем они отличаются?

## Базы данных (12 мин)

### 1. (5 мин)

* С какими базами данных ты работал? Какую базу ты бы рекомендовал использовать и почему?
* Как можно организовать поиск текстовой информации по БД?
* Что такое нормальная форма? Какие ты знаешь?
* Зачем нужны триггеры? Что такое TSQL?

### 2. (2 мин)

https://speed24.ru/q/sh_0606.png

В базе есть такие данные:

```
SELECT * FROM data;
+------+
| val  |
+------+
|    0 |
|    1 |
|    2 |
| NULL |
+------+

SELECT AVG(val) FROM data;

???
```

Что выведет запрос `SELECT AVG(val) FROM data`?

### 3. (5 мин)

https://speed24.ru/q/sh_0605.png

Есть 2 таблицы:

```
mysql> select  * from t_1;
+------+
| val  |
+------+
|    1 |
|    2 |
|   10 |
+------+
3 rows in set (0.00 sec)

mysql> select  * from t_2;
+------+
| val  |
+------+
|    1 |
|    2 |
+------+
2 rows in set (0.00 sec)

```

Как найти строки, отсутствующие в таблице t_2?

## Языки программирования (35 мин)

### 0. (5 мин)

Какие языки программирования ты знаешь, что в них нравится, а что нет? Какой самый лучший язык?

### 1. (3 мин)

Что такое Copy-on-Write, счетчик ссылок, и сборщик мусора?

### 2. (3 мин)

Ты знаком с методологией TDD? Какие виды тестов бывают? Есть ли опыт интеграции систем автотестирования в проект?
Какой подход следует применить во время тестирования кода, который имеет внешние зависимости (например, обращение к API Банка)?

### 3. (5 мин)

Зачем нужны шаблоны проектирования? Какие из них ты используешь?

### 4. (3 мин)

Что такое Reflection API? Что он позволяет сделать?

### 5. (2 мин)

Какие строки НЕ содержат ошибки?

```
/* 1 */ $a = 42;
/* 2 */ $b = &$a;
/* 3 */ $70a = 70 * $a;
/* 4 */ $a0 = ${"a"} + 0;
```

### 6. (3 мин)

Какой результат выполнения следующего кода?

```php
class Foo {
    public static function getClassName()
    {
        return __CLASS__;
    } 
}

class Bar extends Foo { }

echo Bar::getClassName();
```

А как сделать, чтобы вывелось `Bar`?

### 7. (3 мин)

Каким будет результат выполнения кода?

```php
function foo(&$r)
{ 
    $r++;
}

$r = 1;
foo(foo($r));

echo $r;
```

### 8. (3 мин)

Каким будет результат выполнения кода?

```php
interface Foo {
    const A = 'Foo';
}

class Bar implements Foo {
    const A = 'Bar';
}

echo Bar::A;
```

* Foo
* Bar
* Сообщение об ошибке, интерфейс не может содержать константы
* Сообщение об ошибке, класс не может перекрывать константы интерфейса

### 9. (5 мин)

В запросе `$_GET['user_ids']` должна приходить строка с номерами пользователей через запятую, например: 1,2,17,48.

Оцени качество кода. Что бы ты исправил?

```php
<?php

function load_users_data($user_ids)
{
    $user_ids = explode(',', $user_ids);
    foreach ($user_ids as $user_id) {
        $db = mysqli_connect("localhost", "root", "123123", "database");
        $sql = mysqli_query($db, "SELECT * FROM users WHERE id=$user_id");
        while ($obj = $sql->fetch_object()) {
            $data[$user_id] = $obj->name;
        }
        mysqli_close($db);
    }
    return $data;
}

$data = load_users_data($_GET['user_ids']);
foreach ($data as $user_id => $name) {
    echo "<a href=\"/show_user.php?id=$user_id\">$name</a>";
}
```

## Laravel (20 мин)

### 0. (5 мин)

С какими composer-пакетами ты работал?

### 1. (2 мин)

У нас есть микросервис авторизации. Нужно быстро посмотреть, сколько в нем сейчас пользователей. Как это сделать?

### 2. (3 мин)

Как в Laravel работают механизм событий и слушателей? В чем его удобство?

### 3. (5 мин)

В каких случаях нужно использовать механизм очередей? Как он работает в Laravel?

### 4. (5 мин)

Что такое Service Container и зачем он нужен? Зачем нужен Observer (наблюдатель)?

Поясни, что делает этот код:

```php
<?php

namespace App\Providers;

// use ...

class AppServiceProvider extends ServiceProvider
{
    public function boot()
    {
        $this->app->singleton(WorkingDirectoryInterface::class, function ($app) {
            return new WorkingDirectory();
        });

        $this->app->bind(RecordExporter::class, function ($app, $params) {
            $className = sprintf("\\App\\DataExchange\\Exporters\\%sRecordExporter", Str::studly($params["format"]));
            if (!class_exists($className)) abort(404, sprintf("No concrete class %s", $className));
            return new $className();
        });

        \App\Models\Table::observe([TableFilesObserver::class]);
    }
}
```

## Алгоритмы (10 мин)

### 1. (5 мин)

Какие виды индексов ты знаешь? В чем их отличия?

### 2. (5 мин)

Два города А и В находятся на расстоянии 300 км друг от друга.

Одновременно из этих городов выезжают навстречу друг другу два велосипедиста и мчатся, не останавливаясь, со скоростью 50 километров в час каждый.

Но вместе с первым велосипедистом из города А вылетает муха, пролетающая в час 100 км. Муха опережает первого велосипедиста, летит навстречу другому, выехавшему из В.

Встретив этого, она тотчас поворачивает назад к велосипедисту А. Повстречав его, опять летит обратно навстречу велосипедисту В.

И так продолжала летать взад и вперёд до той поры, пока велосипедисты не съехались. Тогда она успокоилась и села одному из велосипедистов на шапку.

Сколько километров пролетела муха?

![Муха и велосипедисты](assets/muha.jpg)

## Инструменты, командная строка и Linux (11 мин)

### 1. (5 мин)

Какой командой узнать, где находится php?

Что делают следующие команды:

* chmod, chown
* curl, wget, nc
* ping, traceroute, dig, nslookup
* docker, docker-compose

### 2. (3 мин)

Ты нашел какой-то странный участок кода. Как понять, кто его написал и зачем?

Какие команды git ты используешь?

### 3. (3 мин)

Есть файл `srs.xml` с такой структурой

```xml
<?xml version="1.0" encoding="windows-1251"?>
<Offices>
    <BankOffice id="4">
        <Title>Операционный офис "Череповец" Филиала ПАО "БАНК УРАЛСИБ" в г.Санкт-Петербург</Title>
        <INN>0274062111</INN>
        <City>Череповец</City>
    </BankOffice>
    <BankOffice id="12">
        <Title>Отделение "Выборгское" Филиала ПАО "БАНК УРАЛСИБ" в г.Санкт-Петербург</Title>
        <INN>0274062111</INN>
        <City>Санкт-Петербург</City>
    </BankOffice>
</Offices>
```

Как быстро посчитать общее количество городов?